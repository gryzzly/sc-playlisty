<!doctype html>
<head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="playlists hidden page">
        <h1 class="page-header">Your playlists</h1>
        <a class="button playlists-new">+ Add new playlist</a>
        <ul class="list"></ul>
    </div>

    <div class="playlist hidden page">
    </div>

    <div class="loading hidden">
    </div>

    <!-- ========================== Templates ============================= -->
    <script type="tpl/html" id="playlist-item-tpl">
        <li data-playlist-id={{id}}>{{title}}</li>
    </script>

    <script type="tpl/html" id="playlist-tpl">
        <div class="page-header">
            <a class="page-back">◀ Playlists</a>
            <h1 class="page-title">{{title}}</h1>
        </div>
        <div class="playlist-controls">
            <a class="button toggle">Play</a>
            <a class="button delete">Delete</a>
            <a class="button add disabled">Add to playlist<a>
            <!--a class="button shuffle">Shuffle</a-->
            <!--a class="button play">Edit</a-->
        </div>
        {{#description}}
        <p class="playlist-description">{{description}}</p>
        {{/description}}
        <div class="list tracks">{{{tracks}}}</div>
    </script>

    <script type="tpl/html" id="track-tpl">
        <li class="track" data-track-id="{{id}}">
            <button>listen</button>
            <label>{{#search}}<input type="checkbox"> {{/search}}{{author}} – {{title}}</label>
        </li>
    </script>

    <script type="tpl/html" id="search-tpl">
        <form action="/">
            <input class="search-input" placeholder="search for tracks">
        </form>
        <div class="list tracks">{{{tracks}}}</div>
    </script>
    </script>

    <!-- ========================= Application ============================ -->
    <script src="lib/LAB.js"></script>
    <script>
        $LAB
        // SC SDK
        .script(
            // 'http://connect.soundcloud.com/sdk.js'
            'lib/sdk.js'
        )
        // detect mobile browsers
        .script('lib/ismobile.js').wait()
        // libraries
        .script(
            'lib/' + (window.isMobile ? 'zepto.js' : 'jquery.js'),
            'lib/underscore.js',
            'lib/mustache.js',
            'lib/spin.min.js'
        ).wait()
        .script('lib/backbone.js').wait()
        // application files
        .script(
            'js/playlists.js',
            'js/tracks.js',
            'js/router.js',
            'js/search.js',
            'js/audio.js'
        ).wait()
        .script('js/app.js');
    </script>
</body>
